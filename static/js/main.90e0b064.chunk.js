(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){},28:function(e,t,a){e.exports=a(57)},33:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(24),i=a.n(r),c=(a(33),a(5)),l=a(1),o=a.n(l),u=a(4),d=a(11),p=a(12),m=a(14),g=a(13),v=a(15),h=(a(36),function(){var e=Object(u.a)(o.a.mark(function e(){var t,a,s,n,r=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=2,e.next=5,fetch(t,a);case 5:if(!(s=e.sent).ok){e.next=13;break}return e.next=9,s.json();case 9:return n=e.sent,e.abrupt("return",n);case 13:throw console.log(s.status),new Error(s.status);case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.log(e.t0,"b\u0142ad z custom fetch"),new Error(e.t0.message);case 21:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}()),f=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://sebastian-webdev-task-app.herokuapp.com/tasks/",a={method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,h("https://sebastian-webdev-task-app.herokuapp.com/tasks/",a);case 5:return s=e.sent,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://sebastian-webdev-task-app.herokuapp.com/lists",a={method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,h("https://sebastian-webdev-task-app.herokuapp.com/lists",a);case 5:return s=e.sent,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),b=(a(37),function(e){return n.a.createElement("footer",null,n.a.createElement("p",null,"\xa9 2019 Sebastian Go\u0142\u0119biowski"),n.a.createElement("p",null,n.a.createElement("a",{href:"https://github.com/SebastianWebdev"},n.a.createElement("i",{className:"fab fa-github"}))))}),E=function(e,t){var a={};return t.forEach(function(t){var a=e.filter(function(e){return t._id===e.list});t.tasks=a}),a.lists=t,a},w=function(e,t){var a=(new Date).toISOString();return{completed:!1,owner:t,description:"Empty Task",name:"Task Name",stage:1,list:e,createdAt:a,updatedAt:a,_id:"",temp_Id:(new Date).getTime()}},y=function(e,t,a){var s=a.lists.findIndex(function(t){return t._id===e}),n=a.lists[s].tasks.findIndex(function(e){return e._id===t});return{listIndex:s,taskIndex:n,task:a.lists[s].tasks[n]}},N=function(e){var t=JSON.stringify(e);return JSON.parse(t)},S=function(e){var t=(new Date).toISOString();return{tittle:"Nowa Lista",description:"Tutaj umie\u015b\u0107 opis",_id:"",temp_id:(new Date).getTime(),createdAt:t,tasks:[],owner:e,completed:!1}},T=function(e,t){var a=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),s={method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)};h(e,s).then(function(e){}).catch(function(e){console.log(e)})},j=function(){var e=Object(u.a)(o.a.mark(function e(t,a,s){var n,r,i,c,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t+a,r={method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:""},body:JSON.stringify(s)},i=sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken,c="Bearer "+i,r.headers.Authorization||(r.headers.Authorization=c),e.prev=5,e.next=8,h(n,r);case 8:return l=e.sent,e.abrupt("return",l);case 12:return e.prev=12,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}},e,null,[[5,12]])}));return function(t,a,s){return e.apply(this,arguments)}}(),I=(a(38),a(22),a(3)),z=function(e){return n.a.createElement("nav",{className:" nav nav1"},n.a.createElement("div",{className:"logo-wrap"},n.a.createElement("h1",{className:"logo"},"Logo")),e.isMain?n.a.createElement("div",{className:"buttons"}," ",n.a.createElement("div",{className:"btn"}," ",n.a.createElement(I.c,{to:"register"}," Register ")),n.a.createElement("div",{className:"btn"}," ",n.a.createElement(I.c,{to:"login"}," Login "))):n.a.createElement("div",{className:"buttons"}," ","login"===e.where?n.a.createElement("div",{className:"btn"}," ",n.a.createElement(I.c,{to:"register"}," Register ")):n.a.createElement("div",{className:"btn"}," ",n.a.createElement(I.c,{to:"login"}," Login "))," "))},L=function(e){return n.a.createElement("main",{className:"welcome-page"},n.a.createElement("section",{className:"intro"},n.a.createElement("h2",{className:"section-tittle"},"Poznaj Task Manager"),n.a.createElement("p",{className:"section-describe"}," Task Manager to aplikacj\u0105 s\u0142u\u017c\u0105ca do tworzenia list zada\u0144. Jest to projekt zrealizowany za pomoc\u0105 Node.js, MongoDB oraz React w ramach nauki tych technologii. Nie jest to komercyjna aplikacja, lecz na potrzeby prezentacji, mo\u017cesz utworzy\u0107 konto u\u017cytkownika i tworzy\u0107 swoje w\u0142asne listy zada\u0144.")),n.a.createElement("section",{className:"technology"},n.a.createElement("h2",{className:"section-tittle"},"U\u017cyte technologie"),n.a.createElement("div",{className:"tech-wrap"},n.a.createElement("div",{className:"tech-card"}," ",n.a.createElement("h2",{className:"card-tittle"},"MongoDB"),n.a.createElement("p",{className:"card-desc"},"Aplikacja u\u017cywa nierelacyjnej bazy danych MongoDB, gdzie przechowywane s\u0105 zadania, listy zada\u0144 oraz u\u017cytkownicy. Pracuj\u0105c z baz\u0105 danych wykorzystywa\u0142em ",n.a.createElement("a",{href:"https://mongoosejs.com/"},"Mongoose"),". Baza danych zosta\u0142a postawiona na ",n.a.createElement("a",{href:"https://www.mongodb.com/cloud/atlas"},"MongoDB Atlas")),n.a.createElement("div",{className:"card-icon-wrap"},n.a.createElement("i",{className:"fas fa-database"}))),n.a.createElement("div",{className:"tech-card"},n.a.createElement("h2",{className:"card-tittle"},"React"),n.a.createElement("p",{className:"card-desc"},"Ca\u0142y front Aplikacji powsta\u0142 przy u\u017cyciu biblioteki React.js. Front zosta\u0142 stworzony jako Single Page Application, oraz zgodnie z wytycznymi responsive web design."),n.a.createElement("div",{className:"card-icon-wrap"},n.a.createElement("i",{className:"fab fa-react"}))),n.a.createElement("div",{className:"tech-card"},n.a.createElement("h2",{className:"card-tittle"},"Node.js"),n.a.createElement("p",{className:"card-desc"},"Strona backendowa stworzona zosta\u0142a przy u\u017cyciu Node.js oraz frameworku ",n.a.createElement("a",{href:"http://expressjs.com/"},"express"),", pozwoli\u0142o mi to na utworzenie REST API. Serwer zosta\u0142 umieszczony na platformie ",n.a.createElement("a",{href:"https://www.heroku.com/"},"Heroku")," Link do kodu na ",n.a.createElement("a",{href:"https://github.com/SebastianWebdev/node.js-Task-app"},"Github")),n.a.createElement("div",{className:"card-icon-wrap"},n.a.createElement("i",{className:"fab fa-node-js"}))))))},O=function(e){var t=e.props,a=t.loginStatus;return n.a.createElement("div",{className:"reg-log-wrapper"},n.a.createElement("h1",null,"Zaloguj si\u0119 do konta"),"400"===a?n.a.createElement("h2",{className:"login-alert"},"Z\u0142y login lub has\u0142o"):null,n.a.createElement("form",{className:"log-form",id:"login",onSubmit:t.onSub},n.a.createElement("label",{htmlFor:"reg-mail"},"Email"),n.a.createElement("input",{onChange:t.handler,name:"email",value:t.regValues.email,id:"reg-mail",placeholder:"Podaj email",type:"email"}),n.a.createElement("label",{htmlFor:"reg-pass"},"Has\u0142o"),n.a.createElement("input",{onChange:t.handler,name:"pass",value:t.regValues.pass,id:"reg-pass",placeholder:"has\u0142o",type:"password"}),n.a.createElement("label",{htmlFor:"rememberMe"},"Zapami\u0119taj mnie"),n.a.createElement("input",{onChange:t.handler,type:"checkbox",id:"rememberMe",name:"rememberMe"}),n.a.createElement("button",{type:"submit",className:"reg-sub"},"Zaloguj si\u0119")))},x=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(z,{where:"login"}),n.a.createElement(O,{props:e}))},A=(a(47),function(e){var t=e.props;return n.a.createElement("div",{className:"reg-log-wrapper"},n.a.createElement("h1",null,"Stw\xf3rz Konto"),n.a.createElement("form",{className:"log-form",id:"reg",onSubmit:t.onSub},n.a.createElement("label",{htmlFor:"reg-name"},"Nazwa"),n.a.createElement("input",{onChange:t.handler,name:"name",value:t.regValues.name,id:"reg-name",placeholder:"Podaj swoje imi\u0119 i nazwisko",type:"text"}),n.a.createElement("label",{htmlFor:"reg-mail"},"Email"),n.a.createElement("input",{onChange:t.handler,name:"email",value:t.regValues.email,id:"reg-mail",placeholder:"Podaj email",type:"email"}),n.a.createElement("label",{htmlFor:"reg-pass"},"Has\u0142o"),n.a.createElement("input",{onChange:t.handler,name:"pass",value:t.regValues.pass,id:"reg-pass",placeholder:"has\u0142o",type:"password"}),n.a.createElement("button",{type:"submit",className:"reg-sub"},"Stw\xf3rz nowe konto")))}),H=function(e){return n.a.createElement("div",{className:"reg-log-wrapper"},n.a.createElement("h1",null,"Konto zosta\u0142o zarejestrowane"),n.a.createElement(I.b,{to:"/login",className:"postreg-link"},"Mo\u017cesz si\u0119 zalogowa\u0107"))},C=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(z,{where:"reg"}),e.isRegistrationDone?n.a.createElement(H,null):n.a.createElement(A,{props:e}))},_=a(10),D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.regValues,s=t.isRegistrationDone,r=t.loginStatus;return n.a.createElement(I.a,null,n.a.createElement(n.a.Fragment,null,n.a.createElement(z,{isMain:!0}),n.a.createElement(_.c,null,n.a.createElement(_.a,{exact:!0,path:"/",component:L}),n.a.createElement(_.a,{path:"/login",render:function(t){return n.a.createElement(x,Object.assign({},t,{regValues:a,handler:e.props.onChange,onSub:e.props.onSub,isRegistrationDone:s,loginStatus:r}))}}),n.a.createElement(_.a,{path:"/register",render:function(t){return n.a.createElement(C,Object.assign({},t,{regValues:a,handler:e.props.onChange,onSub:e.props.onSub,isRegistrationDone:s}))}}))))}}]),t}(s.Component),R=(a(48),a(49),function(e){return n.a.createElement(I.c,{to:"list",id:e.id,name:e.name,onClick:e.handler,className:"list-item"},n.a.createElement("div",{className:"list-item"},n.a.createElement("i",{className:"fas fa-list"}),n.a.createElement("p",{className:"list-name"},e.name),n.a.createElement("button",{"data-listid":e.id,className:"btn-rec btn-rec-small",id:"delete-list",onClick:e.deleteList},"-")))}),M=function(e){var t=e.lists,a=e.userName,s=e.addListHandler,r=e.handler,i=e.deleteList,c=e.avatar,l=t.map(function(e){return n.a.createElement(R,{key:e._id?e._id:e.temp_id,name:e.tittle,id:e._id?e._id:e.temp_id,handler:r,deleteList:i})});return n.a.createElement("nav",{className:" nav nav2"},n.a.createElement("div",{className:"nav-user"},n.a.createElement("img",{src:c,alt:"",className:"avatar-thumbnail"})," ",n.a.createElement(I.c,{to:"/user"},a)),l,n.a.createElement("button",{onClick:s,className:"btn-rec",id:"add-list"},"+"))},F=(a(50),function(e){var t=e.activeList,a=e.handler,s=e.activeListInputs,r=e.isListEddited;return n.a.createElement("div",{className:"listHead","data-listid":t[0]._id},n.a.createElement("textarea",{placeholder:"Nazwa",value:s.tittle,"data-listid":t[0]._id,onChange:a,name:"list-tittle",type:"text",className:"list-input"}),n.a.createElement("textarea",{placeholder:"Opis",className:"list-input",value:s.description,"data-listid":t[0]._id,onChange:a,name:"list-description",type:"text"}),r?n.a.createElement("button",{"data-listid":t[0]._id,onClick:a,className:"save-btn save-btn-list"},"Zapisz zmiany"):null)}),V=(a(51),function(e){var t=e.task.task,a=t._id,s=t.stage,r=e.handler,i=e.activeTaskInputs,c=i.name,l=i.description;return n.a.createElement("div",{className:"taskFull-wrapp",id:a,"data-type":"taskFull","data-stage":s},n.a.createElement("div",{className:"task-close",onClick:r,"data-name":"close"},n.a.createElement("i",{className:"fas fa-times"})),n.a.createElement("input",{onChange:r,className:"input-disp task-imput task-input-name",name:"name",type:"text",placeholder:c,value:c}),n.a.createElement("textarea",{onChange:r,className:"input-disp task-imput task-input-desc",name:"description",value:l,placeholder:l,type:"text"}),n.a.createElement("div",{className:"taskFull-buttons",onClick:r},n.a.createElement("button",{"data-type":"save"},"Zapisz"),n.a.createElement("button",{"data-type":"delete"},"Usu\u0144")))}),B=function(e){var t=e.task,a=e.stageHandler,s=e.fullTaskHandler,r=e.listName,i=e.listId;return n.a.createElement("div",{className:"task","data-listtittle":r,"data-listid":i,"data-stage":t.stage,"data-type":"taskSmall",id:t._id,onClick:s},n.a.createElement("h1",{className:"task-tittle"},t.name),3!==t.stage?n.a.createElement("button",{"data-type":"move",onClick:a,className:"task-btn done-btn"},n.a.createElement("i",{"data-type":"move",className:"fas fa-arrow-right"})):null)},P=function(e){var t=e.stage,a=e.tasks,s=e.activeTask,r=e.stageHandler,i=e.listName,c=e.activeTaskInputs,l=e.listId,o=e.stageName,u=e.handlers,d=a?a.filter(function(e){return e.stage===t}):null,p=d?d.map(function(e){return n.a.createElement(B,{key:e._id,listName:i,listId:l,task:e,stageHandler:r,fullTaskHandler:u.fullTaskHandler})}):null;return n.a.createElement("div",{className:"stag1 tasks-box"},n.a.createElement("h2",{className:"stage-name"},o),p,1===t?n.a.createElement("div",{className:"tasks-footer"},n.a.createElement("button",{id:l,"data-listname":i,onClick:u.addTaskHandler,className:"add-task-btn btn-rec"},"Add")):null,s&&s.task.stage===t&&s.task.list===l?n.a.createElement(V,{handler:u.fullTaskHandler,task:s,activeTaskInputs:c}):null)},J=function(e){var t=e.handlers,a=e.activeTask,s=e.activeList,r=e.activeTaskInputs,i=e.activeListInputs,c=e.isListEddited;return n.a.createElement("div",{className:"app-window-box box-full"},n.a.createElement(F,{activeListInputs:i,activeList:s,handler:t.listInputsHandler,outFocusHandler:t.listInputsOutFocus,isListEddited:c}),n.a.createElement("div",{className:"tasks-wrapper"},n.a.createElement(P,{stageName:"Do Zrobienia",activeTaskInputs:r,stage:1,activeTask:a,handlers:t,tasks:s[0].tasks,listName:s[0].tittle,stageHandler:t.stageTaskHandler,listId:s[0]._id}),n.a.createElement(P,{stageName:"W trakcie",activeTaskInputs:r,stage:2,activeTask:a,tasks:s[0].tasks,stageHandler:t.stageTaskHandler,listName:s[0].tittle,handlers:t,listId:s[0]._id}),n.a.createElement(P,{stageName:"Zrobione",activeTaskInputs:r,stage:3,activeTask:a,tasks:s[0].tasks,stageHandler:t.stageTaskHandler,listName:s[0].tittle,handlers:t,listId:s[0]._id})))},Z=(a(52),function(e){var t=e.data;return n.a.createElement("div",{className:"app-window-box box-empty"},n.a.createElement("h1",{className:"empty-list-text"},"Witaj ",t.user.name),t.lists.length>0?n.a.createElement("h1",{className:"empty-list-text"},"Zacznij prac\u0119 ze swoimi zadaniami"):n.a.createElement("h1",{className:"empty-list-text"},"Dodaj list\u0119 Zada\u0144"))}),U=a(9),W=(a(53),a(54),a(27)),G=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,s,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("avatar",t),"https://sebastian-webdev-task-app.herokuapp.com/users/me/avatar",s={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"))},body:a},e.prev=4,e.next=7,fetch("https://sebastian-webdev-task-app.herokuapp.com/users/me/avatar",s);case 7:return n=e.sent,e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(4),new Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length){e.next=13;break}return e.prev=1,e.next=4,G(t[0]);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:e.next=15;break;case 13:Object(W.a)(t).forEach(function(e){G(e)});case 15:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=new FileReader;return t.readAsDataURL(e[0]),t},Q=function(e){var t=e.url;return n.a.createElement("div",{className:"prev-img-container"},n.a.createElement("img",{className:"prev-img",src:t,alt:""}))},X=function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/").includes("image")},Y=function(e){var t=e.setAvatar,a=e.closeAvatar,r=Object(s.useState)(),i=Object(U.a)(r,2),c=i[0],l=i[1],o=Object(s.useState)(!1),u=Object(U.a)(o,2),d=u[0],p=u[1],m=Object(s.useState)(!1),g=Object(U.a)(m,2),v=g[0],h=g[1],f=Object(s.useState)([]),k=Object(U.a)(f,2),b=k[0],E=k[1],w=Object(s.useState)(!1),y=Object(U.a)(w,2),N=y[0],S=y[1],T=Object(s.useState)(!1),j=Object(U.a)(T,2),I=j[0],z=j[1],L=function(e){if(e.preventDefault(),e.stopPropagation(),"dragenter"===e.type)z(!0);else if("dragleave"===e.type)z(!1);else if("dragover"===e.type)z(!0);else if("drop"===e.type){z(!1);var t=e.dataTransfer.files;if(1!==t.length)alert("Mo\u017cesz wybra\u0107 tylkok jedno zdj\u0119cie");else if(X(t[0].type)){l(t),p(!1);var a=q(t);a.onloadend=function(){var e=a.result;E(e),h(!0)}}else alert("Z\u0142y rodzaj pliku!")}};return n.a.createElement("div",{className:"uploud-avatar-wrapper"},n.a.createElement("div",{className:"dragg-area ".concat(I?"highlight":null),onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:L},N?n.a.createElement("p",{className:"drop-desc"},"Zdj\u0119cie zosta\u0142o wys\u0142ane"):n.a.createElement(n.a.Fragment,null," ",n.a.createElement("p",{className:"drop-desc"},"Przeci\u0105gnij tutaj Plik"),n.a.createElement("p",{className:"drop-desc"},"Albo Wybierz z listy "),n.a.createElement("i",{className:"fas fa-arrow-down"}),n.a.createElement("form",{action:""},n.a.createElement("label",{className:"avatar-input-label btn-rec",htmlFor:"avatar-input"},"Wybierz avatar"),n.a.createElement("input",{onChange:function(e){e.preventDefault(),p(!1);var t=e.target.files;l(t);var a=q(t);a.onloadend=function(){var e=a.result;E(e),h(!0)}},type:"file",id:"avatar-input",name:"avatar",accept:"image/png, image/jpeg"}))," "),v?n.a.createElement("div",{className:"previev-galery"},n.a.createElement(Q,{url:b}),d?null:n.a.createElement("button",{onClick:function(e){K(c).then(function(e){200===e.status&&(S(!0),p(!0),setTimeout(function(){a(),t(b)},1e3))})},className:"send-avatar-button save-btn"},"Wy\u015blij zdj\u0119cie")):null))},$=function(e){var t=e.user,a=t._id,r=t.avatar,i=e.handlers,c=e.isUserEddited,l=e.userInputs,o=l.name,u=l.email,d=Object(s.useState)(!1),p=Object(U.a)(d,2),m=p[0],g=p[1],v=Object(s.useState)(!1),h=Object(U.a)(v,2),f=h[0],k=h[1];Object(s.useEffect)(function(){return i.userResetInputs()},[]);var b=function(e){"mouseenter"===e.type?k(!0):k(!1)};return n.a.createElement("div",{className:"user-wrapper","data-userid":a},m?n.a.createElement(Y,{closeAvatar:function(){g(!1)},setAvatar:i.setNewAvatarToLocaState,userId:a}):n.a.createElement("div",{onMouseLeave:b,onMouseEnter:b,className:"avatar-wrapper"},r?n.a.createElement("img",{className:"user-avatar-img",src:r,alt:"user avatar"}):n.a.createElement("i",{className:"fas fa-user no-img-avatar"}),n.a.createElement("div",{style:f?{visibility:"visible"}:{visibility:"hidden"},className:"avatar-settings"},n.a.createElement("button",{onClick:function(e){g(!0)},className:"avatar-settings-btn btn-rec"},"Zmie\u0144 avatar"))),n.a.createElement("label",{className:"userLabels",htmlFor:"userName"},"Nazwa"),n.a.createElement("input",{"data-type":"name",onChange:i.userInputsHandler,id:"userName",value:o,className:"input-disp input-user input-user_name",type:"text"}),n.a.createElement("label",{className:"userLabels",htmlFor:"userEmail"},"E-mail"),n.a.createElement("h1",{className:"input-disp input-user input-user_email"},u),c?n.a.createElement("button",{onClick:i.userSaveHandler,className:"user-button-save save-btn"}," Zapisz zmiany"):null)},ee=(a(55),function(e){return n.a.createElement("div",{onClick:e.logOutHandler,className:"logOut-wrap"},n.a.createElement("p",{className:"log-out-text"},"Logout"),n.a.createElement("i",{className:"fas fa-sign-out-alt log-out-ico"}))}),te=function(e){function t(){var e,a;Object(d.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={isLoaded:!1},a.user=Object(c.a)({},a.props.data.user),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isReady,a=e.data,s=e.activeTask,r=e.activeTaskInputs,i=e.handlers,c=e.activeListInputs,l=e.activeListName,o=e.activeList,u=e.activeListId,d=e.isUserEddited,p=e.userInputs,m=e.token,g=e.isListEddited;return n.a.createElement(I.a,null,t?n.a.createElement("div",{className:"main-wraper"},n.a.createElement(M,{lists:a.lists,avatar:a.user.avatar,userName:a.user.name,handler:i.setActiveList,addListHandler:i.addListHandler,deleteList:i.deleteList}),n.a.createElement(_.c,null,n.a.createElement(_.a,{path:"/list",render:function(e){return u?n.a.createElement(J,Object.assign({},e,{activeListInputs:c,handlers:i,activeListName:l,lists:a.lists,activeTask:s,activeList:o,activeTaskInputs:r,isListEddited:g})):n.a.createElement(Z,{data:a})}}),n.a.createElement(_.a,{path:"/user",render:function(e){return n.a.createElement($,Object.assign({},e,{user:a.user,handlers:i,userInputs:p,isUserEddited:d,token:m}))}}),n.a.createElement(_.a,{path:"/",render:function(e){return n.a.createElement(Z,Object.assign({},e,{data:a}))}})),n.a.createElement(ee,{logOutHandler:i.logOutHandler})):null)}}]),t}(s.Component),ae=(a(56),function(e){return n.a.createElement("div",{className:"loading-wrap"},n.a.createElement("h1",null,"Loading"),n.a.createElement("div",{className:"dot"}))}),se=function(e){for(var t=e.split(""),a="qwertyuioplkjhgfdsazxcvbnm".split(""),s=!0,n=t.length,r=0;s&&r<n;){var i=a.includes(t[r]);r++,i&&(s=!1)}return s},ne=function(e){function t(){var e,a;Object(d.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={regValue:{name:"",email:"",pass:""},rememberMe:!1,isRegistrationDone:!1,isLogin:!1,isReady:!1,isload:!1,loginStatus:"",data:{},activeTask:{task:{}},activeTaskInputs:{name:"",description:""},activeListInputs:{tittle:"",description:""},userInputs:{name:"",email:""},isUserEddited:!1,isListEddited:!1},a.onSub=function(){var e=Object(u.a)(o.a.mark(function e(t){var s,n,r,i,c,l,u,d,p,m,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s=a.state.regValue,n=s.name,r=s.email,i=s.pass,c=a.state.rememberMe,"reg"!==t.target.id){e.next=18;break}return l={name:n,email:r,password:i},u={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},"https://sebastian-webdev-task-app.herokuapp.com/users",e.prev=7,e.next=10,h("https://sebastian-webdev-task-app.herokuapp.com/users",u);case 10:a.setState({isRegistrationDone:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0);case 16:e.next=37;break;case 18:if("login"!==t.target.id){e.next=37;break}return d={email:r,password:i},"https://sebastian-webdev-task-app.herokuapp.com/users/login",p={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)},e.prev=22,e.next=25,h("https://sebastian-webdev-task-app.herokuapp.com/users/login",p);case 25:m=e.sent,c?localStorage.setItem("accessToken",m.token):sessionStorage.setItem("accessToken",m.token),g=m.user,sessionStorage.setItem("user",JSON.stringify(g)),a.setState({isLogin:!0,loginStatus:"200"}),a.manageData("onSub",g),window.history.pushState({},"main","/"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(22),"400"===e.t1.message&&a.setState({loginStatus:"400"});case 37:case"end":return e.stop()}},e,null,[[7,13],[22,34]])}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){var t=e.target.value;switch(e.target.id){case"reg-name":a.setState(function(e){return{regValue:{name:t,email:e.regValue.email,pass:e.regValue.pass}}});break;case"reg-mail":a.setState(function(e){return{regValue:{name:e.regValue.name,email:t,pass:e.regValue.pass},loginStatus:""}});break;case"reg-pass":a.setState(function(e){return{regValue:{name:e.regValue.name,email:e.regValue.email,pass:t},loginStatus:""}});break;case"rememberMe":a.setState(function(e){return{rememberMe:!e.rememberMe}})}},a.setNewAvatarToLocaState=function(e){var t=Object(c.a)({},a.state.data);t.user.avatar=e,a.setState({data:t})},a.manageData=function(){var e=Object(u.a)(o.a.mark(function e(t){var s,n,r,i,c,l,u,d=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>1&&void 0!==d[1]?d[1]:a.state.user,n=sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken,r=s,e.prev=3,"string"===typeof s&&(r=JSON.parse(s)),i="data:image/jpg;base64,".concat(r.avatar),r.avatar=i,e.next=9,f(n);case 9:return c=e.sent,e.next=12,k(n);case 12:return l=e.sent,(u=E(c,l)).user=r,a.setState({isReady:!0,data:u}),e.abrupt("return",u);case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}},e,null,[[3,19]])}));return function(t){return e.apply(this,arguments)}}(),a.stageTaskHandler=function(e){var t=e.currentTarget.parentNode.id,s=e.currentTarget.parentNode.dataset.listid,n=a.state.data.lists.findIndex(function(e){return e._id===s}),r=a.state.data.lists[n].tasks.findIndex(function(e){return e._id===t}),i=Object(c.a)({},a.state.data),l=i.lists[n].tasks[r];1!==l.stage&&2!==l.stage||(i.lists[n].tasks[r].stage+=1),a.setState({data:i});var o={stage:i.lists[n].tasks[r].stage};j("https://sebastian-webdev-task-app.herokuapp.com/tasks/",t,o).then(function(e){})},a.addTaskHandler=function(e){var t=Object(c.a)({},a.state.data),s=e.target.id,n=t.lists.findIndex(function(e){return e._id===s}),r=a.state.data.user._id,i=w(s,r);t.lists[n].tasks.push(i),a.setState({data:t});var l={name:i.name,description:i.description,list_id:i.list,temp_Id:i.temp_Id};h("https://sebastian-webdev-task-app.herokuapp.com/tasks",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken)},body:JSON.stringify(l)}).then(function(e){var t=Object(c.a)({},a.state.data),s=t.lists[n].tasks.findIndex(function(t){return t.temp_Id===e.temp_Id});t.lists[n].tasks[s]._id=e._id,t.lists[n].tasks[s].createdAt=e.createdAt,t.lists[n].tasks[s].updatedAt=e.updatedAt,a.setState({data:t})})},a.addListHandler=function(e){var t=N(a.state.data),s=a.state.data.user._id,n=S(s);t.lists.push(n),a.setState({data:t});var r={tittle:n.tittle,description:n.description,temp_id:n.temp_id};h("https://sebastian-webdev-task-app.herokuapp.com/lists",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken)},body:JSON.stringify(r)}).then(function(e){var t=Object(c.a)({},a.state.data),s=t.lists.findIndex(function(t){return t.temp_id===e.temp_id});t.lists[s]._id=e._id,t.lists[s].createdAt=e.createdAt,t.lists[s].updatedAt=e.updatedAt,a.setState({data:t})})},a.fullTaskHandler=function(e){var t=Object(c.a)({},a.state.data);if(e.persist(),"taskSmall"===e.currentTarget.dataset.type&&"move"!==e.target.dataset.type){var s=e.currentTarget.dataset.listid,n=e.currentTarget.id,r=y(s,n,t);a.setState({activeTask:r,activeTaskInputs:{name:r.task.name,description:r.task.description}})}else{var i=Object(c.a)({},a.state.data),l=Object(c.a)({},a.state.activeTask);if("name"===e.target.name?a.setState(function(t){return{activeTaskInputs:{name:e.target.value,description:t.activeTaskInputs.description}}}):"description"===e.target.name&&a.setState(function(t){return{activeTaskInputs:{name:t.activeTaskInputs.name,description:e.target.value}}}),"save"===e.target.dataset.type){var o=Object(c.a)({},a.state.activeTaskInputs);if(o.name){l.task.name=o.name,l.task.description=o.description,a.setState({activeTask:{task:{}}});var u={name:o.name,description:o.description},d=l.task._id;j("https://sebastian-webdev-task-app.herokuapp.com/tasks/",d,u).then(function(e){})}else alert("Task musi mie\u0107 jak\u0105\u015b nazw\u0119")}else if("close"===e.currentTarget.dataset.name)a.setState({activeTask:{task:{}}});else if("delete"===e.target.dataset.type){if(window.confirm("Zadanie zostanie usuni\u0119t\u0119, czy napewno chcesz?")){var p=l.listIndex,m=l.taskIndex,g=i.lists[p].tasks[m]._id,v="https://sebastian-webdev-task-app.herokuapp.com/tasks/".concat(g),f={method:"DELETE",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken)}};h(v,f).then(function(e){}),i.lists[p].tasks.splice(m,1),a.setState({data:i,activeTask:{task:{}}})}}}},a.listInputsHandler=function(e){var t=N(a.state.data),s=e.target.dataset.listid,n=t.lists.findIndex(function(e){return e._id===s}),r=e.target.value,i=N(a.state.activeList);if(a.setState({isListEddited:!0}),"change"===e.type)"list-tittle"===e.target.name?a.setState(function(e){return{activeListInputs:{tittle:r,description:e.activeListInputs.description}}}):a.setState(function(e){return{activeListInputs:{tittle:e.activeListInputs.tittle,description:r}}});else if("click"===e.type){var c=a.state.activeListInputs.tittle,l=a.state.activeListInputs.description;if(i[0].tittle=c,t.lists[n].tittle=c,t.lists[n].description=l,c){a.setState({activeList:i,activeListName:c,data:t,isListEddited:!1});var o="https://sebastian-webdev-task-app.herokuapp.com/lists/".concat(s);T(o,{tittle:c,description:l})}else alert("Nazwa jest wymagana")}},a.setActiveList=function(e){if("delete-list"!==e.target.id){var t=e.currentTarget.name,s=e.currentTarget.id,n=[],r={tittle:t,description:(n=se(s)?a.state.data.lists.filter(function(e){return e.temp_id===1*s}):a.state.data.lists.filter(function(e){return e._id===s}))[0].description};a.setState({activeListName:t,activeList:n,activeListId:s,activeListInputs:r})}},a.userInputsHandler=function(e){var t=e.target.dataset.type,s=e.target.value;"name"===t?a.setState(function(e){return{userInputs:{name:s,email:e.userInputs.email},isUserEddited:!0}}):a.setState(function(e){return{userInputs:{name:e.userInputs.name,email:s},isUserEddited:!0}})},a.userSaveHandler=function(e){var t=a.state.userInputs.name,s=N(a.state.data);s.user.name=t,a.setState({data:s}),a.userResetInputs(s);var n=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),r={name:t},i={method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(r)};h("https://sebastian-webdev-task-app.herokuapp.com/users/update",i).then(function(e){}).catch(function(e){console.log(e)})},a.userResetInputs=function(e){e?a.setState({userInputs:{name:e.user.name,email:e.user.email},isUserEddited:!1}):a.setState({userInputs:{name:a.state.data.user.name,email:a.state.data.user.email},isUserEddited:!1})},a.deleteList=function(e){e.preventDefault();var t=e.target.dataset.listid,s="https://sebastian-webdev-task-app.herokuapp.com/lists/".concat(t),n={method:"DELETE",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken)}};if(window.confirm("Czy na pewno chcesz usun\u0105\u0107 list\u0119?")){var r=Object(c.a)({},a.state.data),i=r.lists.findIndex(function(e){return e._id===t});r.lists.splice(i,1),a.setState({data:r}),h(s,n).then(function(e){})}},a.logOutHandler=function(e){var t={method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.accessToken?sessionStorage.accessToken:localStorage.accessToken)}};fetch("https://sebastian-webdev-task-app.herokuapp.com/users/logout",t).then(function(e){window.history.pushState({},"main","/"),a.setState({isLogin:!1,isReady:!1,activeList:[],activeListId:"",activeListName:"",data:{},loginStatus:""}),sessionStorage.clear(),localStorage.clear()}).catch(function(e){console.log(e)})},a.handlers={stageTaskHandler:a.stageTaskHandler,addTaskHandler:a.addTaskHandler,fullTaskHandler:a.fullTaskHandler,addListHandler:a.addListHandler,listInputsHandler:a.listInputsHandler,setActiveList:a.setActiveList,userInputsHandler:a.userInputsHandler,userSaveHandler:a.userSaveHandler,userResetInputs:a.userResetInputs,setNewAvatarToLocaState:a.setNewAvatarToLocaState,deleteList:a.deleteList,logOutHandler:a.logOutHandler},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("accessToken"),a=sessionStorage.getItem("user");if(a)this.setState({isLogin:!0,user:JSON.parse(a)}),this.manageData("mount",a).then(function(t){e.setState({userInputs:{name:t.user.name,email:t.user.email},isload:!0})});else if(t){fetch("https://sebastian-webdev-task-app.herokuapp.com/users/me",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(t){sessionStorage.setItem("user",JSON.stringify(t)),e.setState({isLogin:!0,user:t});var a=sessionStorage.getItem("user");e.manageData("mount",a).then(function(t){e.setState({userInputs:{name:t.user.name,email:t.user.email},isload:!0})})}).catch(function(e){console.log(e)})}else this.setState({isload:!0})}},{key:"render",value:function(){var e=this.state,t=e.isRegistrationDone,a=e.isReady,s=e.data,r=e.activeTask,i=e.activeTaskInputs,c=e.activeListInputs,l=e.activeListName,o=e.activeList,u=e.activeListId,d=e.isUserEddited,p=e.userInputs,m=e.isListEddited,g=e.loginStatus,v=e.isload,h=this.state.regValue,f=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");return v?n.a.createElement("div",{className:"app-wrapper"},this.state.isReady?n.a.createElement(te,{token:f,activeListId:u,activeList:o,activeListName:l,activeListInputs:c,activeTask:r,handlers:this.handlers,isReady:a,data:s,activeTaskInputs:i,userInputs:p,isUserEddited:d,isListEddited:m}):n.a.createElement(D,{regValues:h,isRegistrationDone:t,onChange:this.onChange,onSub:this.onSub,loginStatus:g}),n.a.createElement(b,null)):n.a.createElement(ae,null)}}]),t}(s.Component);window.addEventListener("drop",function(e){e.preventDefault()}),i.a.render(n.a.createElement(ne,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.90e0b064.chunk.js.map